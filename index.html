<!DOCTYPE html>
<html lang="pt-MZ">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cota√ß√£o Express ‚Äî Futurista</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#070d19; --bg2:#0b1224; --bg3:#0e1530; --ink:#eaf6ff; --muted:#9db9d2;
  --pri:#00e5ff; --accent:#7c3aed; --shadow:0 30px 80px rgba(0,0,0,.55);
}
html,body{margin:0;padding:0;height:100%;font-family:Inter,sans-serif;color:var(--ink);}
body{overflow-x:hidden;background:#070d19;}
canvas#bgCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}

a{text-decoration:none;color:var(--pri);}
.container{max-width:1100px;margin:0 auto;padding:0 18px;}

.glass{
  background: rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.12);
  backdrop-filter: blur(14px);
  border-radius:22px;
  box-shadow: var(--shadow);
  padding:22px;
  transition:0.3s;
}
.glass:hover{box-shadow:0 40px 120px rgba(0,0,0,.6);}

header{position:sticky;top:0;background:rgba(6,10,22,.7);backdrop-filter:blur(12px);padding:16px 0;z-index:50;border-bottom:1px solid rgba(255,255,255,.08);}
.nav{display:flex;justify-content:space-between;align-items:center;}
.brand{display:flex;align-items:center;gap:12px;}
.logo{width:50px;height:50px;border-radius:16px;background: radial-gradient(circle at 30% 30%, #00e5ff, transparent 45%), radial-gradient(circle at 70% 60%, #7c3aed, transparent 45%), linear-gradient(135deg,#0b1224, #1b2a50);display:grid;place-items:center;box-shadow:inset 0 0 20px rgba(0,229,255,.28),0 10px 30px rgba(0,0,0,.5);}
.brand h1{margin:0;font-family:Poppins;font-size:20px;}
.nav .cta{padding:12px 18px;border-radius:20px;font-weight:800;background:linear-gradient(135deg,var(--pri),var(--accent));color:#051320;transition:.3s;box-shadow:0 0 8px var(--pri);}
.nav .cta:hover{transform:scale(1.08);box-shadow:0 0 20px var(--accent);}

.hero{display:grid;grid-template-columns:1.2fr .8fr;gap:26px;padding:36px 0 20px;}
.hero h2{font-size:clamp(28px,4vw,46px);}
.hero .lead{color:var(--muted);margin-top:10px;font-size:16px;}

.form-wrap{display:grid;grid-template-columns:1fr .9fr;gap:26px;margin-top:28px;}
.card{border-radius:24px;}
label{display:block;margin-bottom:6px;font-size:13px;color:var(--muted);}
.input{width:100%;padding:14px 14px 14px 48px;border-radius:16px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.38);color:var(--ink);outline:none;transition:.3s;}
.input:focus{border-color:var(--pri);box-shadow:0 0 0 5px rgba(0,229,255,.1);}
.phone{display:grid;grid-template-columns:72px 1fr;gap:10px;}
.cc{display:grid;place-items:center;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.36);color:var(--muted);}

.dropzone{border:2px dashed rgba(0,229,255,.3);border-radius:20px;padding:20px;text-align:center;cursor:pointer;position:relative;overflow:hidden;background:rgba(0,0,0,.34);transition:.3s;}
.dropzone:hover{border-color:var(--accent);}
.dropzone input{position:absolute;inset:0;opacity:0;cursor:pointer;}
.dz-instr{font-size:14px;color:var(--muted);}
.previews{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:12px;margin-top:14px;}
.thumb{position:relative;border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,.08);}
.thumb img{width:100%;height:100px;object-fit:cover;}
.thumb .x{position:absolute;top:6px;right:6px;width:26px;height:26px;background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.2);border-radius:6px;font-size:14px;cursor:pointer;}
.progress-bar{position:absolute;bottom:0;left:0;height:4px;background:var(--pri);width:0%;transition:.2s;}

.actions{display:flex;gap:12px;margin-top:16px;align-items:center;}
.btn{padding:14px 18px;border-radius:20px;font-weight:800;border:none;cursor:pointer;transition:.3s;}
.btn-primary{background:linear-gradient(135deg,var(--pri),var(--accent));color:#04121f;box-shadow:0 0 8px var(--pri);}
.btn-primary:hover{transform:scale(1.08);box-shadow:0 0 20px var(--accent);}
.btn-ghost{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:var(--ink);}
.btn-ghost:hover{transform:scale(1.08);}
.status-msg{margin-top:14px;font-weight:700;font-size:15px;color:var(--pri);text-align:center;}

footer{padding:30px 0;text-align:center;color:var(--muted);font-size:13px;}
@media(max-width:980px){.hero{grid-template-columns:1fr;}.form-wrap{grid-template-columns:1fr;}}
@media(max-width:620px){.nav .cta{display:none;}}
</style>
</head>
<body>
<canvas id="bgCanvas"></canvas>

<header>
  <div class="container nav">
    <a href="#top" class="brand">
      <div class="logo"></div>
      <h1>Cota√ß√£o Express</h1>
    </a>
    <a href="#pedido" class="cta">Quero minha cota√ß√£o</a>
  </div>
</header>

<main class="container" id="top">
<section class="hero">
  <div class="panel glass">
    <h2>Importe <span style="color:var(--pri)">iPhones</span>, <span style="color:var(--pri)">Samsungs</span> e Electr√≥nicos com <span style="color:var(--pri)">pre√ßos baixos</span> e <span style="color:var(--pri)">qualidade alta</span></h2>
    <p class="lead">Envie a foto/print, seu nome e WhatsApp. Receba cota√ß√£o completa automaticamente.</p>
  </div>
</section>

<section id="pedido" class="form-wrap">
  <div class="glass card">
    <h3>Envie a(s) foto(s) do produto</h3>
    <div class="dropzone" id="dropzone">
      <input type="file" id="fileInput" accept="image/*" multiple>
      <div id="dzEmpty">
        <div>Arraste e solte aqui, ou clique para escolher</div>
        <div class="dz-instr">Print n√≠tido acelera a cota√ß√£o.</div>
      </div>
      <div id="previews" class="previews" hidden></div>
    </div>
  </div>

  <div class="glass card">
    <h3>Seus dados</h3>
    <form id="quoteForm">
      <div class="field">
        <label for="nome">Nome completo *</label>
        <input class="input" id="nome" name="nome" type="text" placeholder="Ex.: Jo√£o Silva" required>
      </div>
      <div class="field" style="margin-top:10px">
        <label for="phone">WhatsApp *</label>
        <div class="phone">
          <div class="cc">+258</div>
          <input class="input" id="phone" name="phone" type="tel" pattern="^[78]\d{8}$" minlength="9" maxlength="9" placeholder="841234567" required>
        </div>
      </div>
      <div class="actions">
        <button type="submit" class="btn btn-primary">üì© Enviar</button>
        <button type="reset" class="btn btn-ghost">Limpar</button>
      </div>
      <div id="status" class="status-msg"></div>
    </form>
  </div>
</section>
</main>

<footer>
¬© <span id="year"></span> Cota√ß√£o Express
</footer>

<script>
// Ano
document.getElementById('year').textContent = new Date().getFullYear();

// Fundo animado com part√≠culas
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let w=canvas.width=window.innerWidth;
let h=canvas.height=window.innerHeight;
window.addEventListener('resize',()=>{w=canvas.width=window.innerWidth;h=canvas.height=window.innerHeight;});
class Particle{
  constructor(){this.x=Math.random()*w;this.y=Math.random()*h;this.vx=Math.random()*1-0.5;this.vy=Math.random()*1-0.5;this.size=Math.random()*2+1;}
  draw(){ctx.fillStyle='rgba(0,229,255,0.4)';ctx.beginPath();ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.fill();}
  update(){this.x+=this.vx;this.y+=this.vy;if(this.x<0||this.x>w)this.vx*=-1;if(this.y<0||this.y>h)this.vy*=-1;}
}
let particles=[];
for(let i=0;i<120;i++)particles.push(new Particle());
function animate(){
  ctx.clearRect(0,0,w,h);
  particles.forEach(p=>{p.update();p.draw();});
  requestAnimationFrame(animate);
}
animate();

// Dropzone m√∫ltiplo
const dz=document.getElementById('dropzone');
const fileInput=document.getElementById('fileInput');
const previews=document.getElementById('previews');
let selectedFiles=[];
dz.addEventListener('dragover',e=>{e.preventDefault();dz.style.borderColor='var(--pri)';});
dz.addEventListener('dragleave',()=>{dz.style.borderColor='rgba(0,229,255,.28)';});
dz.addEventListener('drop',async e=>{e.preventDefault();dz.style.borderColor='rgba(0,229,255,.28)';await handleFiles(e.dataTransfer.files);});
fileInput.addEventListener('change',async e=>{await handleFiles(e.target.files);});
async function handleFiles(files){
  selectedFiles=[...files];
  previews.innerHTML='';
  selectedFiles.forEach((f,i)=>{
    if(!f.type.startsWith('image/')) return;
    const div=document.createElement('div');div.className='thumb';
    div.innerHTML=`<img src="${URL.createObjectURL(f)}"><div class="progress-bar" id="progress${i}"></div><button type="button" class="x" onclick="removeFile(${i})">‚úï</button>`;
    previews.appendChild(div);
  });
  previews.hidden=false;
  document.getElementById('dzEmpty').hidden=true;
}
function removeFile(i){selectedFiles.splice(i,1);handleFiles(selectedFiles);}

// Config Cloudinary e Google Sheets
const CLOUD_NAME="dfycprdka";
const UPLOAD_PRESET="two line";
const SHEETS_WEBAPP_URL="https://script.google.com/macros/s/AKfycbyjUY1ogQeh0zCdNU5512iiH5yRuTmjeMenFC9qAlkZG3lmkwj1rj81JUxnp_teO6PpZQ/exec";

// Envio formul√°rio
document.getElementById('quoteForm').addEventListener('submit',async e=>{
  e.preventDefault();
  const statusEl=document.getElementById('status');
  statusEl.textContent="‚è≥ Enviando...";
  const nome=document.getElementById('nome').value;
  const phone=document.getElementById('phone').value;
  if(selectedFiles.length===0){statusEl.textContent="‚ùå Selecione pelo menos uma imagem.";return;}

  try{
    for(let i=0;i<selectedFiles.length;i++){
      const f=selectedFiles[i];
      const formData=new FormData();
      formData.append("file",f);
      formData.append("upload_preset",UPLOAD_PRESET);

      const cloudRes=await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/upload`,{method:"POST",body:formData});
      const cloudData=await cloudRes.json();
      const imageUrl=cloudData.secure_url;
      document.getElementById(`progress${i}`).style.width='100%';

      // envia para Google Sheets
      await fetch(SHEETS_WEBAPP_URL,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({nome, phone, imagem_url:imageUrl})
      });
    }
    statusEl.textContent="‚úÖ Enviado com sucesso!";
    document.getElementById('quoteForm').reset();
    previews.innerHTML='';selectedFiles=[];document.getElementById('dzEmpty').hidden=false;
  }catch(err){console.error(err);statusEl.textContent="‚ùå Ocorreu um erro ao enviar.";}
});
</script>
</body>
</html>