<!DOCTYPE html>
<html lang="pt-MZ">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cota√ß√£o Express ‚Äî Upload Futurista</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* --- Reset e base --- */
*{box-sizing:border-box;margin:0;padding:0;font-family:Poppins,sans-serif;}
body{height:100vh; display:flex; justify-content:center; align-items:center; background:#0a0f1c; color:#eaf6ff; overflow-x:hidden;}
.container{width:400px; max-width:90%; background:rgba(10,15,28,0.8); padding:30px; border-radius:20px; box-shadow: 0 0 40px rgba(0,229,255,0.4); backdrop-filter: blur(12px);}
h2{text-align:center; color:#00e5ff; margin-bottom:20px; font-size:26px;}
input, button{width:100%; padding:12px 16px; margin:10px 0; border-radius:12px; border:none; outline:none; font-size:14px;}
input{background:rgba(255,255,255,0.05); color:#eaf6ff;}
input::placeholder{color:#7a8ca5;}
button{background:linear-gradient(135deg,#00e5ff,#7c3aed); color:#070d19; font-weight:700; cursor:pointer; transition:0.3s;}
button:hover{transform:translateY(-2px); box-shadow:0 10px 20px rgba(0,229,255,0.4);}
.dropzone{position:relative; border:2px dashed rgba(0,229,255,0.4); border-radius:16px; padding:20px; text-align:center; cursor:pointer; transition:0.3s; margin-top:10px;}
.dropzone:hover{border-color:#7c3aed; background:rgba(124,58,237,0.05);}
.dropzone input{position:absolute; inset:0; width:100%; height:100%; opacity:0; cursor:pointer;}
.dropzone-text{color:#7a8ca5; font-size:14px;}
.previews{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px;}
.thumb{position:relative; width:80px; height:80px; border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.1);}
.thumb img{width:100%; height:100%; object-fit:cover;}
.thumb .x{position:absolute; top:4px; right:4px; background:rgba(0,0,0,0.5); width:20px; height:20px; border-radius:6px; font-size:14px; text-align:center; line-height:20px; cursor:pointer; color:#fff;}
#status{text-align:center; margin-top:12px; font-weight:600;}
</style>
</head>
<body>

<div class="container">
  <h2>Enviar Produto</h2>

  <input type="text" id="nome" placeholder="Nome completo *" required>
  <input type="tel" id="phone" placeholder="WhatsApp *" pattern="^[78]\d{8}$" required>

  <div class="dropzone" id="dropzone">
    <div class="dropzone-text">Arraste imagens ou clique aqui</div>
    <input type="file" id="fileInput" accept="image/*" multiple>
  </div>

  <div class="previews" id="previews"></div>

  <button id="uploadBtn">üì© Enviar</button>
  <div id="status"></div>
</div>

<script>
// --- Configura√ß√µes Cloudinary ---
const CLOUD_NAME = "SEU_CLOUD_NAME";       // substitua pelo seu
const UPLOAD_PRESET = "SEU_UPLOAD_PRESET"; // substitua pelo seu

const fileInput = document.getElementById("fileInput");
const dropzone = document.getElementById("dropzone");
const previews = document.getElementById("previews");
const uploadBtn = document.getElementById("uploadBtn");
const status = document.getElementById("status");

let filesToUpload = [];

// --- Dropzone ---
dropzone.addEventListener("dragover", e=>{e.preventDefault(); dropzone.style.borderColor="#00e5ff";});
dropzone.addEventListener("dragleave", e=>{dropzone.style.borderColor="rgba(0,229,255,0.4)";});
dropzone.addEventListener("drop", e=>{e.preventDefault(); handleFiles(e.dataTransfer.files);});
fileInput.addEventListener("change", e=>{handleFiles(e.target.files);});

function handleFiles(files){
    for(let f of files){
        if(!f.type.startsWith('image/')) continue;
        filesToUpload.push(f);

        const reader = new FileReader();
        reader.onload = e=>{
            const div = document.createElement("div");
            div.className="thumb";
            div.innerHTML=`<img src="${e.target.result}"><div class="x" onclick="removeFile(this)">‚úï</div>`;
            previews.appendChild(div);
        };
        reader.readAsDataURL(f);
    }
}

function removeFile(el){
    const index = Array.from(previews.children).indexOf(el.parentElement);
    if(index>-1) filesToUpload.splice(index,1);
    el.parentElement.remove();
}

// --- Upload ---
uploadBtn.addEventListener("click", async ()=>{
    const nome = document.getElementById("nome").value.trim();
    const phone = document.getElementById("phone").value.trim();

    if(!nome || !phone || filesToUpload.length===0){
        alert("Preencha todos os campos e selecione pelo menos uma imagem!");
        return;
    }

    status.textContent="Enviando...";
    let uploadedUrls = [];

    for(let f of filesToUpload){
        const formData = new FormData();
        formData.append("file", f);
        formData.append("upload_preset", UPLOAD_PRESET);

        try{
            const res = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/upload`, {
                method: "POST",
                body: formData
            });
            const data = await res.json();
            if(data.secure_url) uploadedUrls.push(data.secure_url);
        }catch(err){
            console.error(err);
        }
    }

    if(uploadedUrls.length>0){
        status.textContent=`‚úÖ Enviado com sucesso! ${uploadedUrls.length} imagem(ns)`;
        console.log({nome, phone, images: uploadedUrls});
        previews.innerHTML="";
        filesToUpload = [];
    } else {
        status.textContent="‚ùå Falha no envio!";
    }
});
</script>
</body>
</html>